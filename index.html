<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Fan Simulator</title>
  <style>
    body { display: flex; flex-direction: column; align-items: center; margin: 20px; font-family: sans-serif; }
    #canvas { border: 1px solid #888; background: #f0f0f0; }
    .controls { margin-top: 10px; }
    .controls label { margin-right: 10px; }
  </style>
</head>
<body>
  <canvas id="canvas" width="400" height="400"></canvas>
  <div class="controls">
    <label>Speed: <input type="range" id="speedSlider" min="0" max="20" value="5" /></label>
    <label>Blade color: <input type="color" id="bladeColor" value="#3333cc" /></label>
    <label>Sticker (URL): <input type="text" id="stickerURL" placeholder="Image URL for sticker / pattern" size="30" /></label>
    <button id="loadSticker">Load Sticker</button>
  </div>

  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    const speedSlider = document.getElementById("speedSlider");
    const bladeColorInput = document.getElementById("bladeColor");
    const stickerURLinput = document.getElementById("stickerURL");
    const loadStickerBtn = document.getElementById("loadSticker");

    let angle = 0;
    let stickerImg = null;

    loadStickerBtn.addEventListener("click", () => {
      const url = stickerURLinput.value.trim();
      if (url) {
        const img = new Image();
        img.crossOrigin = "anonymous";
        img.onload = () => {
          stickerImg = img;
        };
        img.onerror = () => {
          alert("Could not load sticker image.");
        };
        img.src = url;
      } else {
        stickerImg = null;
      }
    });

    function drawFan() {
      const w = canvas.width, h = canvas.height;
      ctx.clearRect(0, 0, w, h);

      ctx.save();
      ctx.translate(w/2, h/2);
      ctx.rotate(angle);

      const bladeCount = 4;
      const bladeLength = 120;
      const bladeWidth = 30;

      for (let i = 0; i < bladeCount; i++) {
        ctx.save();
        ctx.rotate((i * 2 * Math.PI) / bladeCount);

        // draw blade
        ctx.fillStyle = bladeColorInput.value;
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(bladeWidth/2, -bladeLength);
        ctx.lineTo(-bladeWidth/2, -bladeLength);
        ctx.closePath();
        ctx.fill();

        // draw sticker/pattern if loaded
        if (stickerImg) {
          // scale sticker to fit the blade
          const stickerW = bladeWidth;
          const stickerH = bladeLength / 2;
          ctx.save();
          ctx.beginPath();
          ctx.rect(-stickerW/2, -stickerH * 0.9, stickerW, stickerH);
          ctx.clip();
          ctx.drawImage(stickerImg, -stickerW/2, -stickerH * 0.9, stickerW, stickerH);
          ctx.restore();
        }

        ctx.restore();
      }

      ctx.restore();
    }

    function animate() {
      const speed = Number(speedSlider.value);
      angle += speed * 0.02;  // adjust multiplier as needed
      drawFan();
      requestAnimationFrame(animate);
    }

    animate();
  </script>
</body>
</html>
